<div class="search">
  <div class="centered">
    <form role="search" ng-submit="ThreadListCtrl.searchClicked()">
      <div class="btn-container" ng-show="!searchFocused">
        <a class="btn" style="display:block;" ng-click="ThreadListCtrl.composeClicked()"><i class="glyphicon glyphicon-plus"></i>&nbsp; Compose</a>
      </div>

      <div class="input-inset-container" ng-show="searchFocused">
        <a class="btn btn-small" ng-click="ThreadListCtrl.searchCleared()"><i class="glyphicon glyphicon-x"></i>&nbsp; Clear</a>
      </div>

      <input type="text" ng-class="{'active': searchFocused}" ng-model="search" ng-focus="searchFocused = true" ng-blur="searchFocused = (search.length > 0)" placeholder="Search" ng-keydown="ThreadListCtrl.keypressInAutocomplete($event)">
    </form>

    <div class="thread-list autocomplete">
      <a class="thread" ng-class="{active: contact == ThreadListCtrl.autocompleteSelection}" ng-repeat="contact in ThreadListCtrl.autocomplete"><div><div>
        <participant-bubble email="{{contact.email}}"></participant-bubble>
        <div class="participants">{{contact.name}}</div>
        <div class="snippet">{{contact.email}}</div>
      </div></div></a>
    </div>
  </div>
</div>

<div class="centered beneath-search">
  <h3 style="text-transform:capitalize;">{{ThreadListCtrl.viewName}}</h3>
  <div class="thread-list bordered">
    <a class="thread clickable" ng-repeat="thread in ThreadListCtrl.threads" ng-href="#/thread/{{thread.id}}" id="{{thread.id}}">
        <div class="{{thread.tagData | tag_expand}}"><div>
        <div class="date">5:41pm</div>
        <participant-bubble email="{{thread.participants[0].email}}"></participant-bubble>
        <div class="participants">{{thread.participants | pretty_participants}}</div>
        <div class="snippet"><span class="subject">{{thread.subject}}</span> {{thread.snippet}}</div>
    </div></div></a>

    <div ng-show="!ThreadListCtrl.threads" class="loading-indicator">
      <div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div>
    </div>
  </div>
</div>